<h1>Dynamic Staff Filter</h1>
<div class="card-body mb-3">
    <form method="POST" class="filter-form">
        {% csrf_token %}
        <div class="mb-1">
            <label class="form-label" style="font-weight:bold;">Filter by:</label>
        </div>

        <div class="row mb-2">

            <div class="col-2">
                <label for="filter_staffcategory" class="form-label">Staff Category</label>
                <select name="filter_staffcategory" id="filter_staffcategory" class="form-select">
                    <option value="">All</option> 
                    {% for key, value in staffcategory %}
                        <option value="{{ key }}" {% if key == filter_staffcategory %} selected {% endif %}>
                            {{ value }}
                        </option>
                    {% endfor %}
                </select>
            </div>

            <div class="col-2">
                <label for="filter_department" class="form-label">Department</label>
                <select name="filter_department" id="filter_department" class="form-select">
                    <option value="">All</option>
                    {% for key, value in department %}
                        <option value="{{ key }}" {% if key == filter_department %} selected {% endif %}>
                            {{ value }}
                        </option>
                    {% endfor %}
                </select>
            </div>

            <div class="col-2">
                <label for="filter_qualification" class="form-label">Qualification</label>
                <select name="filter_qualification" id="filter_qualification" class="form-select">
                    <option value="">All</option>
                    {% for key, value in qualification %}
                        <option value="{{ key }}" {% if key == filter_qualification %} selected {% endif %}>
                            {{ value }}
                        </option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="col-2">
                <label for="filter_title" class="form-label">Title</label>
                <select name="filter_title" id="filter_title" class="form-select">
                    <option value="">All</option> 
                    {% for key, value in title %}
                        <option value="{{ key }}" {% if key == filter_title %} selected {% endif %}>
                            {{ value }}
                        </option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-2">
                <label for="filter_contract" class="form-label">Contract Type</label>
                <select name="filter_contract" id="filter_contract" class="form-select">
                    <option value="">All</option> 
                    {% for key, value in contract %}
                        <option value="{{ key }}" {% if key == filter_contract %} selected {% endif %}>
                            {{ value }} 
                        </option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-2">
                <label for="filter_status" class="form-label">Status</label>
                <select name="filter_status" id="filter_status" class="form-select">
                    <option value="">All</option> 
                    {% for key, value in STAFFSTATUS %}
                        <option value="{{ key }}" {% if key == filter_status %} selected {% endif %}>
                            {{ value }}
                        </option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-2">
                <label for="filter_gender" class="form-label">Gender</label>
                <select name="filter_gender" id="filter_gender" class="form-select">
                    <option value="">All</option> 
                    {% for key, value in GENDER %}
                        <option value="{{ key }}" {% if key == filter_gender %} selected {% endif %}>
                            {{ value }}
                        </option>
                    {% endfor %}
                </select>
            </div> 
        </div>
        <div class="col-md-4 mt-4">
            <button type="submit" class="btn btn-success btn-sm">Apply</button>
            <a class="btn btn-outline-secondary btn-sm" href="{% url 'allstaff' %}">Reset</a>
        </div>
    </form>
</div>

<h2>Filtered Results</h2>
<ul>
    {% for staff in staffs %}
        <li>{{ staff }}</li>
    {% empty %}
        <li>No results found.</li>
    {% endfor %}
</ul>

<!-- Pagination Controls -->
<div class="pagination">
    <span class="step-links">
        {% if staffs.has_previous %}
            <a href="?page=1">&laquo; first</a>
            <a href="?page={{ staffs.previous_page_number }}">previous</a>
        {% endif %}

        <span class="current">
            Page {{ staffs.number }} of {{ staffs.paginator.num_pages }}.
        </span>

        {% if staffs.has_next %}
            <a href="?page={{ staffs.next_page_number }}">next</a>
            <a href="?page={{ staffs.paginator.num_pages }}">last &raquo;</a>
        {% endif %}
    </span>
</div>
