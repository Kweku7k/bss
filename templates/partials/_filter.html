<div class=" sidebar bg-info-light pt-4">
    <div class="card-body mb-3">
        <form method="POST" class="filter-form">
            {% csrf_token %}
            
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h5 style="font-weight: bold;">Filter by</h5>
                <div>
                    <button type="submit" class="btn btn-success btn-sm">Apply</button>
                    <a class="btn btn-outline-secondary btn-sm" href="{% url 'test' %}">Clear</a>
                </div>
            </div>
    
            <div class="mb-3">
                <label class="form-label border-bottom" style="font-weight: bold;">Staff Category</label>
                <div>
                    {% for key, value in staffcategory %}
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="filter_staffcategory" id="staffcategory_{{ key }}" value="{{ key }}" {% if key == filter_staffcategory %} checked {% endif %}>
                        <label class="form-check-label" for="staffcategory_{{ key }}">{{ value }}</label>
                    </div>
                    {% endfor %}
                </div>
            </div>
    
            <div class="mb-3">
                <label class="form-label border-bottom" style="font-weight: bold;">School/Faculty</label>
                <div>
                    {% for key, value in school_faculty %}
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="filter_school_faculty" id="school_faculty_{{ key }}" value="{{ key }}" {% if key == filter_school_faculty %} checked {% endif %}>
                        <label class="form-check-label" for="school_faculty_{{ key }}">{{ value }}</label>
                    </div>
                    {% endfor %}
                </div>
            </div>
    
            <div class="mb-3">
                <label class="form-label border-bottom" style="font-weight: bold;">Directorate</label>
                <div>
                    {% for key, value in directorate %}
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="filter_directorate" id="directorate_{{ key }}" value="{{ key }}" {% if key == filter_directorate %} checked {% endif %}>
                        <label class="form-check-label" for="directorate_{{ key }}">{{ value }}</label>
                    </div>
                    {% endfor %}
                </div>
            </div>
    
            <div class="mb-3">
                <label class="form-label border-bottom" style="font-weight: bold;">Department</label>
                <div>
                    {% for key, value in department %}
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="filter_department" id="department_{{ key }}" value="{{ key }}" {% if key == filter_department %} checked {% endif %}>
                        <label class="form-check-label" for="department_{{ key }}">{{ value }}</label>
                    </div>
                    {% endfor %}
                </div>
            </div>
    
            <div class="mb-3">
                <label class="form-label border-bottom" style="font-weight: bold;">Job Title</label>
                <div>
                    {% for key, value in jobtitle %}
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="filter_jobtitle" id="jobtitle_{{ key }}" value="{{ key }}" {% if key == filter_jobtitle %} checked {% endif %}>
                        <label class="form-check-label" for="jobtitle_{{ key }}">{{ value }}</label>
                    </div>
                    {% endfor %}
                </div>
            </div>
    
            <div class="mb-3">
                <label class="form-label border-bottom" style="font-weight: bold;">Qualification</label>
                <div>
                    {% for key, value in qualification %}
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="filter_qualification" id="qualification_{{ key }}" value="{{ key }}" {% if key == filter_qualification %} checked {% endif %}>
                        <label class="form-check-label" for="qualification_{{ key }}">{{ value }}</label>
                    </div>
                    {% endfor %}
                </div>
            </div>
    
            <div class="mb-3">
                <label class="form-label border-bottom" style="font-weight: bold;">Title</label>
                <div>
                    {% for key, value in title %}
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="filter_title" id="title_{{ key }}" value="{{ key }}" {% if key == filter_title %} checked {% endif %}>
                        <label class="form-check-label" for="title_{{ key }}">{{ value }}</label>
                    </div>
                    {% endfor %}
                </div>
            </div>
    
            <div class="mb-3">
                <label class="form-label border-bottom" style="font-weight: bold;">Contract Type</label>
                <div>
                    {% for key, value in contract %}
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="filter_contract" id="contract_{{ key }}" value="{{ key }}" {% if key == filter_contract %} checked {% endif %}>
                        <label class="form-check-label" for="contract_{{ key }}">{{ value }}</label>
                    </div>
                    {% endfor %}
                </div>
            </div>
    
            <div class="mb-3">
                <label class="form-label border-bottom" style="font-weight: bold;">Status</label>
                <div>
                    {% for key, value in STAFFSTATUS %}
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="filter_status" id="status_{{ key }}" value="{{ key }}" {% if key == filter_status %} checked {% endif %}>
                        <label class="form-check-label" for="status_{{ key }}">{{ value }}</label>
                    </div>
                    {% endfor %}
                </div>
            </div>
    
            <div class="mb-3">
                <label class="form-label border-bottom" style="font-weight: bold;">Gender</label>
                <div>
                    {% for key, value in GENDER %}
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="filter_gender" id="gender_{{ key }}" value="{{ key }}" {% if key == filter_gender %} checked {% endif %}>
                        <label class="form-check-label" for="gender_{{ key }}">{{ value }}</label>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label border-bottom" style="font-weight: bold;">Age</label>
                <div>
                    {% for key, value in age_classifications.items %}
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="filter_age" id="age_{{ key }}" value="{{ key }}" {% if key == filter_age %} checked {% endif %}>
                        <label class="form-check-label" for="age_{{ key }}">{{ value }}</label>
                    </div>
                    {% endfor %}

                    <!-- Custom Age Option -->
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="filter_age" id="custom_age_checkbox" value="custom" {% if min_age or max_age %} checked {% endif %}>
                        <label class="form-check-label" for="custom_age_checkbox">Custom Age</label>
                    </div>

                    <!-- Custom Age Inputs (Hidden Initially) -->
                    <div id="custom_age_inputs" style="display: none; margin-top: 10px;">
                        <label for="min_age">Min Age:</label>
                        <input type="number" name="min_age" id="min_age" class="form-control" min="0" max="999" maxlength="3" value="{{ min_age|default:'' }}">

                        <label for="max_age" style="margin-top: 5px;">Max Age:</label>
                        <input type="number" name="max_age" id="max_age" class="form-control" min="0" max="999" maxlength="3" value="{{ max_age|default:'' }}">
                    </div>
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label border-bottom" style="font-weight: bold;">Renewal</label>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="filter_renewal" id="filter_renewal" value="true" {% if filter_renewal == "true" %} checked {% endif %}>
                    <label class="form-check-label" for="filter_renewal">True</label>
                </div>
            </div>
            
            <div class="mb-3">
                <label class="form-label border-bottom" style="font-weight: bold;">Promotion</label>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="filter_promotion" id="filter_promotion" value="true" {% if filter_promotion == "true" %} checked {% endif %}>
                    <label class="form-check-label" for="filter_promotion">True</label>
                </div>
            </div>
        </form>
    </div>
</div>
<!--End of Card-->


<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function () {
        let customCheckbox = document.getElementById("custom_age_checkbox");
        let customInputsDiv = document.getElementById("custom_age_inputs");
    
        // Show input fields if "Custom" is selected
        function toggleCustomAge() {
            if (customCheckbox.checked) {
                customInputsDiv.style.display = "block";
            } else {
                customInputsDiv.style.display = "none";
            }
        }
    
        customCheckbox.addEventListener("change", toggleCustomAge);
        toggleCustomAge();  // Ensure correct display on page load
    });
</script>